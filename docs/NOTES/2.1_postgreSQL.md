
「一台 PostgreSQL 容器 + 多個資料庫 + named volume」


容器：pg_main

資料庫：titanic

Schema：app（建議專案都放在這裡，乾淨不混用）

資料表：app.train、app.test、app.submission
 

名稱例：titanic；帳密 practice_titanic / titanic；DB titanic；Host 127.0.0.1；Port 5432；SSL disable）。
「重新建立 SQLTools → PostgreSQL 連線」

平常維運你要會的 5 招
# 看容器有沒有在跑
docker ps

# 看 Postgres 啟動日誌
docker logs -f pg_main

# 進 DB（進 psql）
docker exec -it pg_main psql -U postgres

# 備份（以 DB 為單位；這裡示範備份 project_a）
docker exec pg_main pg_dump -U postgres -d project_a > "D:\backup\project_a_$(Get-Date -Format yyyyMMdd_HHmm).sql"

# 還原（把備份塞回 project_a）
type "D:\backup\project_a_20250101_1200.sql" | docker exec -i pg_main psql -U postgres -d project_a


注意：備份/還原用的是 .sql（邏輯備份），最穩最通用。


把權限分三層：

超管（只在維運時用）

專案管理/遷移帳號（能改結構）

App 執行帳號（只讀寫資料、不改結構）
（可選）4) 只讀帳號（BI/查詢用）

角色分工（建議）

titanic_owner（NOLOGIN）：專案擁有者「角色」，用來持有 DB / schema（不直接登入）

titanic_admin（LOGIN）：遷移/DBA用；可以改表結構（DDL）

titanic_app（LOGIN）：應用程式用；只能 CRUD（不改結構）

titanic_ro（LOGIN，可選）：只讀用；只能 SELECT





















